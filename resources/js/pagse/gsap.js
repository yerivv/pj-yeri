const parallax = document.getElementById('parallax');
if(parallax) {
    const box1 = parallax.querySelector('#wrap1 .item');
    const box2 = parallax.querySelector('#wrap2 .item');
    const box3 = parallax.querySelector('#wrap3 .item');
    const box4 = parallax.querySelector('#wrap4 .item');
    const box5 = parallax.querySelector('#wrap5 .item');
    const box6 = parallax.querySelector('#wrap6 .item');
    const box7 = parallax.querySelector('#wrap7 .item');
    const box8 = parallax.querySelector('#wrap8 .item');
    const box9 = parallax.querySelector('#wrap9 .item');

    // 2Ï¥à ÎèôÏïà Ïò§Î•∏Ï™ΩÏúºÎ°ú 500px Ïù¥Îèô 
    // .to Î©îÏÑúÎìúÎ•º ÏÇ¨Ïö©ÌïòÎ©¥ ÏÑ†ÌÉùÏöîÏÜåÎäî ÏõÄÏßÅÏûÑ
    gsap.to(box1, {
        duration: 2,
        x: 500,
        borderRadius: 100,
        rotation: 360
    });

    // Ïä§ÌÅ¨Î°§ÏùÑ ÎÇ¥Î¶¨Í≥† ÏöîÏÜåÍ∞Ä Î≥¥Ïù¥Îäî ÏòÅÏó≠Ïóê Ïò§Î©¥ ÏõÄÏßÅÏù¥ÎèÑÎ°ù ÏÑ§Ï†ï. (scrollTrigger)
    // ÏõÄÏßÅÏù¥Îäî ÏãúÏ†êÏùÑ trigger ÏÑ§Ï†ï
    gsap.to(box2, {
        duration: 2,
        x: 500,
        rotation: 360,
        borderRadius: 100,
        scrollTrigger: {
            trigger: box2,  //ÏãúÏûëÏ†ê ÏÑ§Ï†ï
        }
    });

    // Ïï†ÎãàÎ©îÏù¥ÏÖò ÌñâÎèôÏùÑ ÏÑ§Ï†ï (toggleActions)
    // onEnter : Ïï†ÎãàÎ©îÏù¥ÏÖòÏù¥ ÏãúÏûëÌñàÏùÑ Îïå
    // onLeave : Ïï†ÎãàÎ©îÏù¥ÏÖòÏù¥ ÎÅùÎÇ¨ÏùÑ Îïå
    // onEnterBack : Ïï†ÎãàÎ©îÏù¥ÏÖòÏù¥ ÏãúÏûëÌïòÍ≥† ÌôîÎ©¥Ïóê Î≥¥Ïù¥ÏßÄ ÏïäÏùÑÎïå
    // onLeaveBack : Ïï†ÎãàÎ©îÏù¥ÏÖòÏù¥ ÎÅùÎÇòÍ≥† ÌôîÎ©¥Ïóê Î≥¥Ïù¥ÏßÄ ÏïäÏùÑÎïå
    // ÏöîÏÜå Í∞í : play, pause, resume, reset, restart, complete, reverse, none
    gsap.to(box3, {
        duration: 2,
        x: 500,
        rotation: 360,
        borderRadius: 100,
        scrollTrigger: {
            trigger: box3,  //ÏãúÏûëÏ†ê ÏÑ§Ï†ï
            toggleActions: "pause play reverse none"
        }
    });

    // Ïï†ÎãàÎ©îÏù¥ÏÖòÏùò Í∏∞Ï§ÄÏ†ê : trigger
    // start : ÏöîÏÜåÏùò ÏãúÏûëÏ†ê
    // end : Î∏åÎùºÏö∞Ï†ÄÏùò ÏãúÏûëÏ†ê -> ÏöîÏÜåÏùò ÏãúÏûëÏ†êÍ≥º Î∏åÎùºÏö∞Ï†ÄÏùò ÏãúÏûëÏ†êÏù¥ ÎßåÎÇòÎ©¥ ÏûëÎèô
    gsap.to(box4, {
        duration: 2,
        x: 500,
        rotation: 360,
        borderRadius: 100,
        scrollTrigger: {
            trigger: box4,  //ÏãúÏûëÏ†ê ÏÑ§Ï†ï
            start: 'top 20px',
            end: 'bottom 50%',
            toggleActions: "pause play reverse none",
            markers: false,
        }
    });

    // Ïä§ÌÅ¨Î°§ÏùÑ ÎÇ¥Î¶¨Î©¥ Í∞ôÏù¥ ÏõÄÏßÅÏù¥Í≤å ÏÑ§Ï†ï : scrub (ÎßàÏö∞Ïä§ Ïä§ÌÅ¨Î°§ Í∞íÏóê Îî∞Îùº ÏõÄÏßÅÏù¥ÎèÑÎ°ù ÏÑ§Ï†ï)
    // true Î∞è Ï†ïÏàòÍ∞í ÎÑ£ÏùÑ Ïàò ÏûàÏùå (0.5, 1, 2..) ÏÜçÎèÑÎäêÎÇå?
    gsap.to(box5, {
        duration: 2,
        x: 500,
        rotation: 360,
        borderRadius: 100,
        scrollTrigger: {
            trigger: box5,  //ÏãúÏûëÏ†ê ÏÑ§Ï†ï
            start: 'top 50%',
            end: 'bottom 20%',
            scrub: .5,
            markers: false,
        }
    });

    // ‚ùì Í≥†Ï†ïÏãúÌÇ§Îäî ÏÜçÏÑ± : pin
    // ÌïÄÏùò ÏúÑÏπòÎäî endÏùò ÎëêÎ≤àÏß∏ ÏÜçÏÑ±Í∞íÏùÑ Î≥ÄÍ≤ΩÌï¥Î≥¥Î©¥ ÌôïÏù∏
    gsap.to(box6, {
        duration: 2,
        x: 500,
        rotation: 360,
        borderRadius: 100,
        scrollTrigger: {
            trigger: box6,  //ÏãúÏûëÏ†ê ÏÑ§Ï†ï
            start: 'top 50%',
            end: 'top 10%',
            pin: true,
            scrub: true,
            markers: false,
        }
    });

    // ÏãúÏûëÏ†êÏù¥ ÎêêÏùÑÎïå class Ï∂îÍ∞Ä : toggleClass
    // id Í∞íÏùÑ Ï∂îÍ∞ÄÌïòÎ©¥ ÎßàÏª§Ïùò Ïù¥Î¶ÑÏùÑ Î≥ÄÍ≤ΩÌï† Ïàò ÏûàÏùå
    gsap.to(box7, {
        duration: 2,
        x: 500,
        rotation: 360,
        borderRadius: 100,
        scrollTrigger: {
            trigger: box7,
            start: "top center",
            end: "bottom top",
            scrub: true,    
            markers: false,
            toggleClass: "active",
            id: "box7"
        }
    });

    // ÏãúÏûëÏ†êÏù¥ ÎêêÏùÑÎïå class Ï∂îÍ∞Ä : toggleClass
    // id Í∞íÏùÑ Ï∂îÍ∞ÄÌïòÎ©¥ ÎßàÏª§Ïùò Ïù¥Î¶ÑÏùÑ Î≥ÄÍ≤ΩÌï† Ïàò ÏûàÏùå
    // Í∞ÅÍ∞Å ÏΩúÎ∞± Ìï®ÏàòÏóê ÎåÄÌïú ÏÑ§Ï†ïÍ∞í ÌôïÏù∏
    gsap.to(box8, {
        duration: 2,
        x: 500,
        rotation: 360,
        borderRadius: 100,
        scrollTrigger: {
            trigger: box8,
            start: "top center",
            end: "bottom 30%",
            scrub: true,    
            markers: true,
            id: "box8",
            onEnter: () => {console.log("box8 onEnter")},
            onLeave: () => {console.log("box8 onLeave")},
            onEnterBack: () => {console.log("box8 onEnterBack")},
            onLeaveBack: () => {console.log("box8 onLeaveBack")},
        // onUpdate : (self) => {console.log("onUpdate", self.progress.toFixed(3))}, // progress : ÌòÑÏû¨ Ïï†ÎãàÎ©îÏù¥ÏÖòÏùò ÏßÑÌñâÎ•†ÏùÑ ÎÇòÌÉÄÎÇ¥Îäî Í∞íÏúºÎ°ú, toFixed(N) : Í∞íÏùÑ ÏÜåÏàòÏ†ê ÏÑ∏ ÏûêÎ¶¨ÍπåÏßÄ Í≥†Ï†ïÌïòÏó¨ ÌëúÏãúÌï¥ Ï§çÎãàÎã§
            onToggle : (self) => {console.log("onToggle", self.isActive)},
        }
    });
}

const parallax2 = document.getElementById('parallax2');
if(parallax2) {
    console.log(parallax2);

    // Í∏∞Î≥∏ Ïï†ÎãàÎ©îÏù¥ÏÖò
    const box1 = parallax2.querySelector('#wrap1');
    const ani1 = gsap.timeline();
    ani1.to(box1.querySelector('.img'), {rotation: 720, scale: 0, borderRadius: 200})
        .to(box1.querySelector('.img'), {rotation: 0, scale: 1, borderRadius: 20});

    // animation: ani1: ani1Ïù¥ÎùºÎäî GSAP Ïï†ÎãàÎ©îÏù¥ÏÖòÏùÑ Ïä§ÌÅ¨Î°§Î∞îÏôÄ Ïó∞Í≤∞Ìï©ÎãàÎã§. ÏÇ¨Ïö©ÏûêÍ∞Ä Ïä§ÌÅ¨Î°§ÏùÑ ÏõÄÏßÅÏù¥Î©¥ ani1Ïùò Ïû¨ÏÉù ÏßÑÌñâÎ•†Ïù¥ Ïä§ÌÅ¨Î°§ ÏúÑÏπòÏóê ÎßûÏ∂∞ ÎèôÍ∏∞ÌôîÎê©ÎãàÎã§.
    // trigger: box1: Ïù¥ Ïä§ÌÅ¨Î°§ ÎèôÏûëÏùÑ ÏãúÏûëÌïòÍ≥† ÎÅùÎÇ¥Îäî Í∏∞Ï§ÄÏù¥ ÎêòÎäî HTML ÏöîÏÜåÏûÖÎãàÎã§. Ï¶â, box1Ïù¥ ÌäπÏ†ï ÏúÑÏπòÏóê ÎèÑÎã¨ÌïòÎ©¥ Ïï†ÎãàÎ©îÏù¥ÏÖòÏù¥ ÏãúÏûëÎê©ÎãàÎã§.
    // start: "top top": Ïï†ÎãàÎ©îÏù¥ÏÖòÏù¥ ÏãúÏûëÎêòÎäî ÏãúÏ†êÏùÑ Ï†ïÏùòÌï©ÎãàÎã§. **trigger ÏöîÏÜå(box1)Ïùò ÏÉÅÎã®(top)**Ïù¥ **Î∑∞Ìè¨Ìä∏(Î∏åÎùºÏö∞Ï†Ä Ï∞Ω)Ïùò ÏÉÅÎã®(top)**Ïóê ÎãøÎäî ÏàúÍ∞Ñ Ïï†ÎãàÎ©îÏù¥ÏÖòÏù¥ ÏãúÏûëÎê©ÎãàÎã§.
    // end: "+=2000": Ïï†ÎãàÎ©îÏù¥ÏÖòÏù¥ ÎÅùÎÇòÎäî Ïä§ÌÅ¨Î°§ ÏßÄÏ†êÏùÑ Ï†ïÏùòÌï©ÎãàÎã§. start ÏßÄÏ†êÎ∂ÄÌÑ∞ Ïä§ÌÅ¨Î°§ÏùÑ 2000px Îçî ÎÇ¥Î†§Í∞à ÎïåÍπåÏßÄ Ïï†ÎãàÎ©îÏù¥ÏÖòÏù¥ Í≥ÑÏÜç Ïû¨ÏÉùÎê©ÎãàÎã§. Ïï†ÎãàÎ©îÏù¥ÏÖò Ï†ÑÏ≤¥Í∞Ä Ïû¨ÏÉùÎêòÎäî Ïä§ÌÅ¨Î°§ Íµ¨Í∞ÑÏùÄ 2000pxÏûÖÎãàÎã§.
    // scrub: true: Ïù¥ ÏÜçÏÑ±ÏùÄ Ïï†ÎãàÎ©îÏù¥ÏÖòÏùò Ïû¨ÏÉùÎ•†ÏùÑ Ïä§ÌÅ¨Î°§ ÏßÑÌñâÎ•†Í≥º 1:1Î°ú Ïó∞Í≤∞Ìï©ÎãàÎã§. Ïä§ÌÅ¨Î°§ÏùÑ ÎÇ¥Î¶¨Î©¥ Ïï†ÎãàÎ©îÏù¥ÏÖòÏù¥ Ïû¨ÏÉùÎêòÍ≥†, Ïä§ÌÅ¨Î°§ÏùÑ Ïò¨Î¶¨Î©¥ Ïï†ÎãàÎ©îÏù¥ÏÖòÏù¥ ÎêòÍ∞êÏïÑÏßëÎãàÎã§. Ïù¥ ÏÜçÏÑ±Ïù¥ ÏóÜÏúºÎ©¥ Ïï†ÎãàÎ©îÏù¥ÏÖòÏùÄ start ÏßÄÏ†êÏóêÏÑú Ìïú Î≤àÎßå Ïû¨ÏÉùÎê©ÎãàÎã§.
    // üìå pin: true: ÌïµÏã¨Ï†ÅÏù∏ ÏÜçÏÑ±ÏûÖÎãàÎã§. start ÏßÄÏ†êÏóê ÎèÑÎã¨ÌïòÎ©¥ box1 ÏöîÏÜåÎ•º ÌôîÎ©¥Ïóê Í≥†Ï†ïÏãúÌÇµÎãàÎã§. ÏÇ¨Ïö©ÏûêÍ∞Ä 2000pxÎ•º Ïä§ÌÅ¨Î°§ÌïòÎäî ÎèôÏïà box1ÏùÄ ÏõÄÏßÅÏù¥ÏßÄ ÏïäÍ≥† Ï†úÏûêÎ¶¨Ïóê Í≥†Ï†ïÎêú ÏÉÅÌÉúÎ°ú Ïï†ÎãàÎ©îÏù¥ÏÖòÏù¥ Ïû¨ÏÉùÎê©ÎãàÎã§. 2000px Íµ¨Í∞ÑÏù¥ ÎÅùÎÇòÎ©¥ Í≥†Ï†ïÏù¥ ÌíÄÎ¶¨Í≥† ÏùºÎ∞òÏ†ÅÏù∏ Ïä§ÌÅ¨Î°§Ïù¥ Îã§Ïãú Í∞ÄÎä•Ìï¥ÏßëÎãàÎã§.
    // üìå anticipatePin: true: Í≥†Ï†ï Í∏∞Îä•(pin)Ïù¥ Îçî ÏïàÏ†ïÏ†ÅÏúºÎ°ú ÏûëÎèôÌïòÎèÑÎ°ù ÎèïÎäî ÏÜçÏÑ±ÏûÖÎãàÎã§. Í≥†Ï†ï ÏãúÏûë/Ï¢ÖÎ£å ÏßÄÏ†êÏóê ÏïÑÏ£º ÎØ∏ÏÑ∏Ìïú Ïó¨Î∞±ÏùÑ Ï∂îÍ∞ÄÌïòÏó¨, ÌäπÌûà Î™®Î∞îÏùº ÌôòÍ≤ΩÏóêÏÑú Î∞úÏÉùÌï† Ïàò ÏûàÎäî ÌôîÎ©¥ ÌäïÍπÄ ÌòÑÏÉÅÏùÑ Î∞©ÏßÄÌï©ÎãàÎã§.
    // markers: true: Í∞úÎ∞ú Î∞è ÎîîÎ≤ÑÍπÖÏö© ÏÜçÏÑ±ÏûÖÎãàÎã§. ÌôîÎ©¥Ïóê start, end, pin-start Îì± Ïä§ÌÅ¨Î°§ Ìä∏Î¶¨Í±∞Ïùò ÎèôÏûë ÏßÄÏ†êÏùÑ ÏãúÍ∞ÅÏ†ÅÏúºÎ°ú ÌëúÏãúÌï¥Ï§çÎãàÎã§. Ïù¥Î•º ÌÜµÌï¥ Ïï†ÎãàÎ©îÏù¥ÏÖòÏù¥ Ï†ïÌôïÌûà Ïñ¥ÎîîÏÑú ÏãúÏûëÌïòÍ≥† ÎÅùÎÇòÎäîÏßÄ ÏâΩÍ≤å ÌååÏïÖÌï† Ïàò ÏûàÏäµÎãàÎã§.
    ScrollTrigger.create({
        animation: ani1,
        trigger: box1,
        start: "top top",
        end: "+=2000",
        scrub: true,
        pin: true,
        anticipatePin: true,
        markers: false,
    });

    // Ïù¥ÎØ∏ÏßÄ ÏàúÏ∞® ÎÖ∏Ï∂ú
    const box2 = parallax2.querySelector('#wrap2');
    const ani2 = gsap.timeline();
    ani2.from(box2.querySelector('.i1'), {y: -100, autoAlpha: 0, borderRadius: 200})
        .from(box2.querySelector('.i2'), {y: 100, autoAlpha: 0, borderRadius: 200})
        .from(box2.querySelector('.i3'), {y: -100, autoAlpha: 0, borderRadius: 200});

    // anticipatePin: trueÎäî 1Í≥º ÎèôÏùºÌï©ÎãàÎã§. 
    // Ïù¥Îäî GSAPÍ∞Ä pinSpacingÏùÑ ÏúÑÌïú Í≥µÍ∞ÑÏùÑ Ï∂îÍ∞ÄÌï† Îïå, Ïä§ÌÅ¨Î°§ ÏãúÏûë ÏßÄÏ†êÍ≥º ÎÅù ÏßÄÏ†ê ÏñëÏ™ΩÏóê Í∞ÅÍ∞Å Ï∂îÍ∞ÄÏ†ÅÏù∏ Í≥µÍ∞ÑÏùÑ ÌôïÎ≥¥ÌïòÎèÑÎ°ù Ìï©ÎãàÎã§. Ïù¥ Í≥µÍ∞ÑÏùò ÌÅ¨Í∏∞Îäî ÏùºÎ∞òÏ†ÅÏúºÎ°ú start ÏßÄÏ†êÏùò Ïä§ÌÅ¨Î°§ ÏÜçÎèÑÏôÄ Í¥ÄÎ†®Ïù¥ ÏûàÏúºÎ©∞, Î∂ÄÎìúÎü¨Ïö¥ Ï†ÑÌôòÏùÑ ÏúÑÌï¥ Í≥ÑÏÇ∞Îê©ÎãàÎã§.
    ScrollTrigger.create({
        animation: ani2,
        trigger: box2,
        start: "top top",
        end: "+=2000",
        scrub: true,
        pin: true,
        anticipatePin: 1,
        markers: false,
    })

    // Ïù¥ÎØ∏ÏßÄ ÎûúÎç§ ÎÖ∏Ï∂ú
    const box3 = parallax2.querySelector('#wrap3');
    const ani3 = gsap.timeline();
    ani3.from(box3.querySelectorAll('.img'), {
        autoAlpha: 0,
        y: -100,
        ease: 'back.out(3)',
        stagger: {
            amount: 3,
            from: 'random',
        }
    })

    ScrollTrigger.create({
        animation: ani3,
        trigger: box3,
        start: "top top",
        end: "+=3000",
        scrub: true,
        pin: true,
        anticipatePin: 1,
        markers: false,
    })

    // Ïù¥ÎØ∏ÏßÄ ÌôïÎåÄ > Ï∂ïÏÜå
    const box4 = parallax2.querySelector('#wrap4');
    const ani4 = gsap.timeline();
    ani4.from(box4.querySelector('.img'), {
        autoAlpha: .0,
        scale: 3,
        width:  '100vw',
        height: '100vh',
    })

    ScrollTrigger.create({
        animation: ani4,
        trigger: box4,
        start: "top top",
        end: "+=3000",
        scrub: true,
        pin: true,
        anticipatePin: 1,
        markers: false,
    })

    // ÌÖçÏä§Ìä∏ Ï¢åÏö∞ ÌéºÏ≥êÏßÄÍ∏∞
    const box5 = parallax2.querySelector('#wrap5');
    const ani5 = gsap.timeline();
    ani5.to(box5.querySelector('.t1'), {xPercent: 300}, "text")
        .to(box5.querySelector('.t2'), {xPercent: -300}, "text")
        .to(box5.querySelector('.t3'), {xPercent: 300}, "text")
        .to(box5.querySelector('.t4'), {xPercent: -300}, "text")
        
    ScrollTrigger.create({
        animation: ani5,
        trigger: box5,
        start: "top top",
        end: "+=3000",
        scrub: true,
        pin: true,
        anticipatePin: 1,
        markers: false,
    })

    // ÌÖçÏä§Ìä∏ ÌôïÎåÄ
    const box6 = parallax2.querySelector('#wrap6');
    const ani6 = gsap.timeline();
    ani6.to(box6.querySelector('.text'), {scale: 10, duration: 2})
        .to(box6.querySelector('.text'), {autoAlpha: 0})
        
    ScrollTrigger.create({
        animation: ani6,
        trigger: box6,
        start: "top top",
        end: "+=3000",
        scrub: true,
        pin: true,
        anticipatePin: 1,
        markers: false,
    })

    // ÌÖçÏä§Ìä∏ Ï†úÏûêÎ¶¨Ïóê ÏàúÏ∞® ÎÖ∏Ï∂ú
    const box7 = parallax2.querySelector('#wrap7');
    const ani7 = gsap.timeline();
    ani7.from(box7.querySelector('.t1'), {autoAlpha: 0, duration: 1, y: 50}, "+=1")
        .from(box7.querySelector('.t2'), {autoAlpha: 0, duration: 1, y: 50}, "+=1")
        .from(box7.querySelector('.t3'), {autoAlpha: 0, duration: 1, y: 50}, "+=1")
        .from(box7.querySelector('.t4'), {autoAlpha: 0, duration: 1, y: 50}, "+=1")
        .from(box7.querySelector('.t5'), {autoAlpha: 0, duration: 1, y: 50}, "+=1")
        .from(box7.querySelector('.t6'), {autoAlpha: 0, duration: 1, y: 50}, "+=1")
        .from(box7.querySelector('.t7'), {autoAlpha: 0, duration: 1, y: 50}, "+=1")
        
    ScrollTrigger.create({
        animation: ani7,
        trigger: box7,
        start: "top top",
        end: "+=6000",
        scrub: true,
        pin: true,
        anticipatePin: 1,
        markers: false,
    })

    // ÌÖçÏä§Ìä∏ Ï¢åÏö∞ÏóêÏÑú Î™∞Î†§Ïò§Í∏∞
    const box8 = parallax2.querySelector('#wrap8');
    const ani8 = gsap.timeline();
    ani8.from(box8.querySelector('.t1'), {x: innerWidth * 1})
        .from(box8.querySelector('.t2'), {x: innerWidth * -1})
        .from(box8.querySelector('.t3'), {x: innerWidth * 1})
        
    ScrollTrigger.create({
        animation: ani8,
        trigger: box8,
        start: "top top",
        end: "+=4000",
        scrub: true,
        pin: true,
        anticipatePin: 1,
        markers: false,
    })

    // Ïù¥ÎØ∏ÏßÄ ÌôïÎåÄ
    const box9 = parallax2.querySelector('#wrap9');
    const ani9 = gsap.timeline();
    ani9.to(box9.querySelector('.img'), {scale: 10})
        
    ScrollTrigger.create({
        animation: ani9,
        trigger: box9,
        start: "top top",
        end: "+=4000",
        scrub: true,
        pin: true,
        anticipatePin: 'auto',
        markers: false,
    })
}